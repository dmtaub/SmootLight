<!---All configuration items contain a "Class" tag specifying the python class they represent, and an "Args" tag specifying the args to be passed in.-->
<LightInstallation>
	<InheritsFrom>config/HTMLBase.xml</InheritsFrom>
    <InputConfiguration>
		<APPEND>
	    	<InputElement>
	            <Class>inputs.RandomLocs</Class>
	            <Args>
	                <Id>randomLoc</Id>
	            </Args>
	        </InputElement>
		</APPEND>
		<InputElement>
		    <Class>inputs.TapInput</Class>
		    <Args>
			<Id>tap</Id>
			<Port>22332</Port>
			<RefreshInterval>50</RefreshInterval>
		    </Args>
		</InputElement>

	</InputConfiguration>   

    <InstallationConfiguration>
        <Defaults>
            <PixelMapper>simplemap</PixelMapper>
        </Defaults>
    </InstallationConfiguration>
    <PixelConfiguration>
        <InheritsFrom>layouts/60StripLayout.xml</InheritsFrom>
    </PixelConfiguration>
    <PixelMapperConfiguration>
        <PixelMapper>
            <Class>pixelmappers.SimpleMapper</Class>
            <Args>
                <Id>simplemap</Id>
                <CutoffDist>20</CutoffDist>
            </Args>
        </PixelMapper>
        <PixelMapper>
            <Class>pixelmappers.GaussianMapper</Class>
            <Args>
                <Id>gaussmap</Id>
                <CutoffDist>30</CutoffDist>
                <MinWeight>0.1</MinWeight>
                <Width>10</Width>
                <Height>1</Height>
            </Args>
        </PixelMapper>
    </PixelMapperConfiguration>

    <BehaviorConfiguration>
        <Behavior Id="colorchange">
            <InheritsFrom>behaviors/RandomColor.xml</InheritsFrom>
            <Args>
                <ColorList>
                    <Val>(255,0,0)</Val>
                    <Val>(0,0,255)</Val>
                </ColorList>
            </Args>
        </Behavior>
        <Behavior Id="decay">
            <InheritsFrom>behaviors/PixelDecay.xml</InheritsFrom>
        </Behavior>
        <Behavior Id="singleframe">
            <InheritsFrom>behaviors/SingleFrame.xml</InheritsFrom>
        </Behavior>
        <Behavior Id="slowdecay">
            <InheritsFrom>behaviors/PixelDecay.xml</InheritsFrom>
            <Args>
                <Coefficient>.01</Coefficient>
            </Args>
        </Behavior>
        <Behavior>
            <Class>behaviors.XYMove</Class>
            <Args>
                <Id>xymove</Id>
                <XStep>5</XStep>
                <YStep>2</YStep>
            </Args>
        </Behavior>
        <Behavior>
            <Class>behaviors.RestrictLocation</Class>
            <Args>
                <Id>xbounce</Id>
                <Action>'{val}*-1'</Action>
                <ParamName>XStep</ParamName>
                <LocationRestriction>{x}&lt;0 or {x}&gt;800</LocationRestriction>
            </Args>
        </Behavior>
        <Behavior>
            <Class>behaviors.RestrictLocation</Class>
            <Args>
                <Id>ybounce</Id>
                <Action>'{val}*-1'</Action>
                <ParamName>YStep</ParamName>
                <LocationRestriction>{y}&lt;0 or {y}&gt;200</LocationRestriction>
            </Args>
        </Behavior>
        <Behavior>
            <Class>behaviors.BehaviorChain</Class>
            <Args>
                <Id>movebounce</Id>
                <ChainedBehaviors>
                    <Id>xymove</Id>
                    <Id>colorshift</Id>
                    <Id>ybounce</Id>
                    <Id>xbounce</Id>
					<Id>recursivedecay</Id>
                </ChainedBehaviors>
            </Args>
        </Behavior>
        <Behavior>
            <Class>behaviors.ModifyParam</Class>
            <Args>
                <Id>ysin</Id>
                <ParamName>YStep</ParamName>
                <ParamType>Sensor</ParamType>
                <ParamOp>4*math.sin({x}/float(40))</ParamOp>
            </Args>
        </Behavior>

       <Behavior>
            <Class>behaviors.DebugBehavior</Class>
            <Args>
                <Id>debug</Id>
                <z-index>0</z-index>
                <Inputs>
                    <Id>pygamekey</Id>
                    <Id>udp</Id>
                </Inputs>
            </Args>
        </Behavior>

        <Behavior>
            <Class>behaviors.AllPixels</Class>
            <Args>
                <Id>square</Id>
                <Width>20</Width>
            </Args>
        </Behavior>
        <Behavior Id="recursivedecay">
            <InheritsFrom>behaviors/LoopAndDie.xml</InheritsFrom>
            <Args>
                <InitialResponseCount>80</InitialResponseCount>
            </Args>
        </Behavior>
        <Behavior>
            <Class>behaviors.BehaviorChain</Class>
            <Args>
                <Id>runcolordecay</Id>
                <Inputs>
                    <Id>randomLoc</Id>
                </Inputs>
                <ChainedBehaviors>
                    <Id>colorchange</Id>
                    <Id>mover</Id>
                    <Id>decay</Id>
                </ChainedBehaviors>
                <RecursiveHooks>{'mover':'movebounce'}</RecursiveHooks>
                <RenderToScreen>True</RenderToScreen>
                <Mapper>gaussmap</Mapper>
            </Args>
        </Behavior>
        <Behavior>
            <Class>behaviors.ResponseMover</Class>
            <Args>
                <Id>mover</Id>
            </Args>
        </Behavior>
        <Behavior>
            <Class>behaviors.RandomWalk</Class>
            <Args>
                <Id>randmovement</Id>
                <StepSize>2</StepSize>
            </Args>
        </Behavior>
        <Behavior Id="accelerate">
            <InheritsFrom>behaviors/Accelerate.xml</InheritsFrom>
        </Behavior>
        <Behavior>
            <Class>behaviors.EchoBehavior</Class>
            <Args>
                <Id>echo</Id>
                <z-index>0</z-index>
                <RenderToScreen>False</RenderToScreen>
            </Args>
        </Behavior>
        <Behavior>
            <Class>behaviors.ColorShift</Class>
            <Args>
                <Id>colorshift</Id>
            </Args>
        </Behavior>
        <Behavior>
            <Class>behaviors.BehaviorChain</Class>
            <Args>
                <Id>mousechaser</Id>
                <Inputs>
                    <Id>followmouse</Id>
                </Inputs>
                <ChainedBehaviors>
                    <Id>echo</Id>
                    <Id>square</Id>
                    <Id>singleframe</Id>
                </ChainedBehaviors>
                <RenderToScreen>False</RenderToScreen>
            </Args>
        </Behavior>
        <Behavior Id="running">
            <InheritsFrom>behaviors/RunningBehavior.xml</InheritsFrom>
        </Behavior>
        <Behavior Id="mutation">
		<Class>behaviors.SystemConfigMutator</Class>
		<Args><Inputs>
			<Id>tap</Id>
		</Inputs>
		<RenderToScreen>True</RenderToScreen>
		</Args>
        </Behavior>
    </BehaviorConfiguration>
</LightInstallation>
