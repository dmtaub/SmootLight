<LightInstallation>
    <InstallationConfiguration>
        <Defaults>
            <PixelMapper>simplemap</PixelMapper>
        </Defaults>
    </InstallationConfiguration>
    <PixelConfiguration>
        <InheritsFrom>layouts/60StripLayout.xml</InheritsFrom>
    </PixelConfiguration>
    <PixelMapperConfiguration>
        <PixelMapper>
            <Class>pixelmappers.SimpleMapper</Class>
            <Args>
                <Id>simplemap</Id>
                <CutoffDist>20</CutoffDist>
            </Args>
        </PixelMapper>
    </PixelMapperConfiguration>
    <RendererConfiguration>
        <Renderer>
            <InheritsFrom>renderers/60StripSeq.xml</InheritsFrom>
        </Renderer>
        <Renderer>
            <InheritsFrom>renderers/Pygame.xml</InheritsFrom>
        </Renderer>
    </RendererConfiguration>
    <InputConfiguration>
        <InputElement>
            <Class>inputs.PygameInput</Class>
            <Args>
                <Id>pygamekey</Id>
                <RefreshInterval>10</RefreshInterval>
                <Keyboard>True</Keyboard>
            </Args>
        </InputElement>
    </InputConfiguration>
    <BehaviorConfiguration>
        <Behavior Id="risefall" MaxHeight="200">
            <InheritsFrom>behaviors/RiseFall.xml</InheritsFrom>
        </Behavior>
        <Behavior Id="dim">
            <InheritsFrom>behaviors/DimColor.xml</InheritsFrom>
        </Behavior>
        <Behavior Id="colorchange">
            <InheritsFrom>behaviors/RandomColor.xml</InheritsFrom>
        </Behavior>
        <Behavior Id="decay">
            <InheritsFrom>behaviors/PixelDecay.xml</InheritsFrom>
        </Behavior>
        <Behavior>
            <Class>behaviors.BehaviorChain</Class>
            <Args>
                <Id>risefalldie</Id>
                <ChainedBehaviors>
                    <Id>risefall</Id>
                    <Id>2sec</Id>
                    <Id>dim</Id>
                </ChainedBehaviors>
            </Args>
        </Behavior>
        <Behavior>
            <Class>behaviors.BehaviorChain</Class>
            <Args>
                <Id>doors</Id>
                <Inputs>
                    <Id>pygamekey</Id>
                </Inputs>
                <ChainedBehaviors>
                    <Id>mitdoors</Id>
                    <Id>colorchange</Id>
                    <Id>mover</Id>
                    <Id>decay</Id>
                </ChainedBehaviors>
                <RecursiveHooks>{'mover':'risefalldie'}</RecursiveHooks>
                <RenderToScreen>True</RenderToScreen>
           </Args>
       </Behavior>
        <Behavior>
            <Class>behaviors.Timeout</Class>
            <Args>
                <Id>2sec</Id>
                <Timeout>2000</Timeout>
            </Args>
        </Behavior>
        <!--Behavior>
            <Class>behaviors.ModifyParam</Class>
            <Args>
                <Id>swaposc</Id>
                <ParamType>Sensor</ParamType>
                <ParamName>Oscillate</ParamName>
                <ParamOp>not {val}</ParamOp>
            </Args>
        </Behavior-->
        <Behavior>
            <Class>behaviors.MITDoors</Class>
            <Args>
                <Id>mitdoors</Id>
                <Bottom>200</Bottom>
            </Args>
        </Behavior>
        <Behavior>
            <Class>behaviors.ResponseMover</Class>
            <Args>
                <Id>mover</Id>
            </Args>
        </Behavior>
    </BehaviorConfiguration>
</LightInstallation>
