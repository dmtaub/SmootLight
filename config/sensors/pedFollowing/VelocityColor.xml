<!---All configuration items contain a "Class" tag specifying the python class they represent, and an "Args" tag specifying the args to be passed in.-->
<LightInstallation>
    <PixelConfiguration>
        <!--        <InheritsFrom>layouts/10kLayout/10kLayout.xml</InheritsFrom>-->
        <InheritsFrom>layouts/ArtsCouncilLayout.xml</InheritsFrom>
    </PixelConfiguration>
    <RendererConfiguration>
        <Renderer Scale="1">
            <InheritsFrom>renderers/Pygame.xml</InheritsFrom>
        </Renderer>
        <Renderer>
            <InheritsFrom>renderers/ArtsCouncil.xml</InheritsFrom>
        </Renderer>
    </RendererConfiguration>
    <InstallationConfiguration>
        <Defaults>
            <PixelMapper>simplemap</PixelMapper>
        </Defaults>
    </InstallationConfiguration>
    <PixelMapperConfiguration>
        <PixelMapper>
            <Class>pixelmappers.SimpleMapper</Class>
            <Args>
                <Id>simplemap</Id>
                <CutoffDist>20</CutoffDist>
            </Args>
        </PixelMapper>
        <PixelMapper>
            <Class>pixelmappers.GaussianMapper</Class>
            <Args>
                <Id>gaussmap</Id>
                <CutoffDist>15</CutoffDist>
                <MinWeight>0.1</MinWeight>
                <Width>7</Width>
                <Height>10</Height>
            </Args>
        </PixelMapper>
    </PixelMapperConfiguration>
    <InputConfiguration>
        <InputElement>
            <Class>inputs.PedestrianSimulator</Class>
            <Args>
                <Id>pedsim</Id>
                <MaxX>200</MaxX>
                <Velocity>10</Velocity>
                <NumSensors>40</NumSensors>
                <SensorSpacing>45</SensorSpacing>
                <NumPeds>2</NumPeds>
            </Args>
        </InputElement>
        <InputElement>
            <Class>inputs.PygameInput</Class>
            <Args>
                <Id>pygameclick</Id>
                <RefreshInterval>10</RefreshInterval>
                <Clicks>True</Clicks>
            </Args>
        </InputElement>
        <InputElement>
            <Class>inputs.SensorNetworkToLocation</Class>
            <Args>
                <Id>netloc</Id>
                <SensorNetworkId>pedsim</SensorNetworkId>
                <SensorSpacing>45</SensorSpacing>
            </Args>
        </InputElement>
        <InputElement>
            <Class>inputs.DirectionalPedestrians</Class>
            <Args>
                <Id>dirped</Id>
                <LocSensorId>netloc</LocSensorId>
            </Args>
        </InputElement>
    </InputConfiguration>
    <BehaviorConfiguration>
        <Behavior Id="recursivedecay" InitialResponseCount="30">
            <Doc>recursive decay for a pixel event - use in a recursive hook</Doc>
            <InheritsFrom>behaviors/LoopAndDie.xml</InheritsFrom>
        </Behavior>
        <Behavior Id="decay">
            <InheritsFrom>behaviors/PixelDecay.xml</InheritsFrom>
            <Args>
                <Coefficient>.003</Coefficient>
            </Args>
        </Behavior>
        <Behavior>
            <Class>behaviors.GenerateModulate</Class>
            <Args>
                <Id>genmod</Id>
                <ThresholdDist>60</ThresholdDist>
                <MaxDist>100</MaxDist>
                <IntersectionTime>5000</IntersectionTime>
            </Args>
        </Behavior>
        <Behavior>
            <Class>behaviors.VelocityBasedColor</Class>
            <Args>
                <Id>velcolor</Id>
                <MinHue>0</MinHue>
                <MaxHue>1</MaxHue>
                <MinVel>${Vel}$*-.0176</MinVel> <!--convert from mph-->
                <MaxVel>${Vel}$*.0176</MaxVel>
                <Vel>5</Vel> 
            </Args>
        </Behavior>
        <Behavior Id="white">
            <InheritsFrom>behaviors/RandomColor.xml</InheritsFrom>
            <Args>
                <ColorList>
                    <Val>(255,255,255)</Val>
                </ColorList>
            </Args>
        </Behavior>
        <Behaviors>
            <Class>behaviors.XYMoveVelocity</Class>
            <Args>
                <Id>xymovevel</Id>
                <XVel>5</XVel>
                <YVel>0</YVel>
            </Args>
        </Behaviors>
        <Behavior>
            <Class>behaviors.BehaviorChain</Class>
            <Args>
                <Id>genmodChain</Id>
                <Inputs>
                    <Id>dirped</Id>
                </Inputs>
                <ChainedBehaviors>
                    <Id>genmod</Id>
                    <Id>velcolor</Id>
                    <Id>decay</Id>
                </ChainedBehaviors>
                <RecursiveHooks>{'genmod':'xymovevel'}</RecursiveHooks>
                <Mapper>gaussmap</Mapper>
                <RenderToScreen>True</RenderToScreen>
            </Args>
        </Behavior>
        <Behavior>
            <Class>behaviors.BehaviorChain</Class>
            <Args>
                <Id>groundTruth</Id>
                <Inputs>
                    <Id>netloc</Id>
                </Inputs>
                <ChainedBehaviors>
                    <Id>white</Id>
                    <Id>decay</Id>
                </ChainedBehaviors>
                <Mapper>gaussmap</Mapper>
                <RenderToScreen>False</RenderToScreen>
            </Args>
        </Behavior>
    </BehaviorConfiguration>
</LightInstallation>
