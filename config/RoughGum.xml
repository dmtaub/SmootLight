<!---All configuration items contain a "Class" tag specifying the python class they represent, and an "Args" tag specifying the args to be passed in.-->
<LightInstallation>
    <InstallationConfiguration>
        <Defaults>
            <PixelMapper>pedmap</PixelMapper>
        </Defaults>
    </InstallationConfiguration>
    <PixelConfiguration>
        <InheritsFrom>layouts/10kLayout/10kLayout.xml</InheritsFrom>
        <!--            <InheritsFrom>layouts/60StripLayout.xml</InheritsFrom>-->
    </PixelConfiguration>
    <PixelMapperConfiguration>
         <PixelMapper>
            <Class>pixelmappers.PedMapper</Class>
            <Args>
                <Id>pedmap</Id>
                <Intensity>10</Intensity>
            </Args>
        </PixelMapper>
    </PixelMapperConfiguration>
    <RendererConfiguration>
        <!--Renderer Scale=".5">
            <InheritsFrom>renderers/Pygame.xml</InheritsFrom>
        </Renderer-->
    </RendererConfiguration>
    <InputConfiguration>
        <InputElement>
		    <Class>inputs.TapInput</Class>
		    <Args>
			<Id>tap</Id>
			<Port>22332</Port>
			<RefreshInterval>50</RefreshInterval>
		    </Args>
		</InputElement>

        <InputElement>
            <Class>inputs.PedestrianSimulator</Class>
            <Args>
                <Id>pedsim</Id>
                <MaxX>17000</MaxX>
                <Velocity>40</Velocity>
                <NumSensors>400</NumSensors>
                <SensorSpacing>45</SensorSpacing>
                <NumPeds>50</NumPeds>
            </Args>
        </InputElement>
    </InputConfiguration>
    <BehaviorConfiguration>
        <Behavior Id="mutation">
		<Class>behaviors.SystemConfigMutator</Class>
		<Args><Inputs>
			<Id>tap</Id>
		</Inputs>
		<RenderToScreen>True</RenderToScreen>
		</Args>
        </Behavior>
        <Behavior Id="recursivedecay" InitialResponseCount="5">
            <Doc>recursive decay for a pixel event - use in a recursive hook</Doc>
            <InheritsFrom>behaviors/LoopAndDie.xml</InheritsFrom>
        </Behavior>

        <Behavior>
            <InheritsFrom>behaviors/RandomColor.xml</InheritsFrom>
            <Doc>always outputs green</Doc>
            <Args>
                <Id>greencolor</Id>
                <ColorList>
                    <Val>(200,55,200)</Val>
                </ColorList>
            </Args>
        </Behavior>
        <Behavior>
            <Class>behaviors.RandomSetBrightColorBehavior</Class>
            <Args>
                <Id>setbrightcolor</Id>
            </Args>
        </Behavior>
        <Behavior Id="singleframe">
            <InheritsFrom>behaviors/SingleFrame.xml</InheritsFrom>
        </Behavior>
        <Behavior>
            <Class>behaviors.PedTrack</Class>
            <Args>
                <Id>pedtrack</Id>
            </Args>
        </Behavior>
        <Behavior Id="decay" Coefficient=".5">
            <InheritsFrom>behaviors/PixelDecay.xml</InheritsFrom>
        </Behavior>
        <Behavior>
            <Class>behaviors.DiscardData</Class>
            <Args>
                <Id>discard</Id>
                <Keep>1</Keep>
            </Args>
       </Behavior>
       <Behavior>
            <Class>behaviors.ColorShift</Class>
            <Args>
                <Id>colorshift</Id>
                <Increment>0.02</Increment>
            </Args>
        </Behavior>
       <Behavior>
           <Class>behaviors.AggregateResponse</Class>
           <Args>
               <Id>agg</Id>
            </Args>
       </Behavior>
       <Behavior>
            <Class>behaviors.BehaviorChain</Class>
            <Args>
                <Id>chewinggum</Id>
                <Inputs>
                    <Id>pedsim</Id>
                </Inputs>
                <ChainedBehaviors>
                    <Id>greencolor</Id>
                    <Id>pedtrack</Id>
                    <Id>singleframe</Id>
                </ChainedBehaviors>
                <RecursiveHooks>{'pedtrack':'colorshift'}</RecursiveHooks>
                <RenderToScreen>True</RenderToScreen>
                <Mapper>pedmap</Mapper>
            </Args>
        </Behavior>
      <Behavior>
            <Class>behaviors.ResponseMover</Class>
            <Args>
                <Id>mover</Id>
            </Args>
        </Behavior>
   </BehaviorConfiguration>
</LightInstallation>
