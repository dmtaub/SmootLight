<!---All configuration items contain a "Class" tag specifying the python class they represent, and an "Args" tag specifying the args to be passed in.-->
<LightInstallation>
    <InstallationConfiguration>
        <Defaults>
            <PixelMapper>sblobmap</PixelMapper>
        </Defaults>
    </InstallationConfiguration>
    <PixelConfiguration>
            <InheritsFrom>layouts/10kLayout/10kLayout.xml</InheritsFrom>
    </PixelConfiguration>
    <PixelMapperConfiguration>
        <PixelMapper>
            <Class>pixelmappers.SquareBlobMapper</Class>
            <Args>
                <Id>sblobmap</Id>
            </Args>
        </PixelMapper>
        <PixelMapper>
            <Class>pixelmappers.GaussianMapper</Class>
            <Args>
                <Id>gaussmap</Id>
                <CutoffDist>30</CutoffDist>
                <MinWeight>0.1</MinWeight>
                <Width>10</Width>
                <Height>1</Height>
            </Args>
        </PixelMapper>
    </PixelMapperConfiguration>
    <RendererConfiguration>
<Renderer>
    <Class>renderers.PygameRenderer</Class>
    <Args>
        <Id>pygamerender</Id>
        <Size>(1200, 100)</Size>
    </Args>
</Renderer>
    </RendererConfiguration>
    <InputConfiguration>
        <InputElement>
            <Class>inputs.LeftEdgeInput</Class>
            <Args>
                <Id>leftedge</Id>
            </Args>
        </InputElement>
         <InputElement>
            <Class>inputs.RightEdgeInput</Class>
            <Args>
                <Id>rightedge</Id>
            </Args>
        </InputElement>
        <InputElement>
            <Class>inputs.UDPInput</Class>
            <Args>
                <Id>udp</Id>
                <Port>3344</Port>
                <RefreshInterval>50</RefreshInterval>
            </Args>
        </InputElement>
        <InputElement>
            <Class>inputs.PedestrianSimulator</Class>
            <Args>
                <Id>pedsim</Id>
                <MaxX>1200</MaxX>
                <Velocity>40</Velocity>
                <NumSensors>40</NumSensors>
                <SensorSpacing>48</SensorSpacing>
                <NumPeds>5</NumPeds>
            </Args>
        </InputElement>
         <InputElement>
            <Class>inputs.SensorNetworkToLocation</Class>
            <Args>
                <Id>netloc</Id>
                <SensorNetworkId>pedsim</SensorNetworkId>
                <SensorSpacing>48</SensorSpacing>
            </Args>
        </InputElement>
        <InputElement>
            <Class>inputs.DirectionalPedestrians</Class>
            <Args>
                <Id>dirped</Id>
                <LocSensorId>netloc</LocSensorId>
            </Args>
        </InputElement>
 
    </InputConfiguration>

    <BehaviorConfiguration>
        <Behavior Id='accelerate'>
            <Class>behaviors.CappedAccelerate</Class>
            <Args>
                <MaxVelocity>50</MaxVelocity>
                <Acceleration>1.1</Acceleration>
            </Args>
        </Behavior>
        <Behavior> 
            <Class>behaviors.OffScreenDeath</Class>
            <Args>
                <Id>offScreenDeath</Id>
            </Args>
        </Behavior>
        <Behavior>
            <Class>behaviors.RandomSetBrightColorBehavior</Class>
            <Args>
                <Id>setbrightcolor</Id>
            </Args>
        </Behavior>
        <Behavior Id="decaylong" Coefficient=".0025">
            <InheritsFrom>behaviors/PixelDecay.xml</InheritsFrom>
        </Behavior>
         <Behavior Id="decayshort" Coefficient=".5">
            <InheritsFrom>behaviors/PixelDecay.xml</InheritsFrom>
        </Behavior>

        <Behavior>
            <Class>behaviors.TimedWarp</Class>
            <Args>
                <Id>timedwarp</Id>
                <FramesToDeath>50</FramesToDeath>
            </Args>
        </Behavior>
        <Behavior>
            <Class>behaviors.BehaviorChain</Class>
            <Args>
                <Id>movebounce</Id>
                <ChainedBehaviors>
                    <Id>move</Id>
                    <Id>accelerate</Id>
                    <Id>offScreenDeath</Id>
                    <Id>timedwarp</Id>
                </ChainedBehaviors>
            </Args>
        </Behavior>
       <Behavior>
            <Class>behaviors.GrowNear</Class>
            <Args>
                <Id>growright</Id>
                <GrowthDirection>right</GrowthDirection>
                <HitSensitivity>4</HitSensitivity>
                <MaxVelocity>10</MaxVelocity>
                <MinVelocity>-1</MinVelocity>
                <MinLength>20</MinLength>
            </Args>
        </Behavior>
        <Behavior>
            <Class>behaviors.GrowNear</Class>
            <Args>
                <Id>growleft</Id>
                <GrowthDirection>left</GrowthDirection>
                <HitSensitivity>4</HitSensitivity>
                <MaxVelocity>10</MaxVelocity>
                <MinVelocity>-1</MinVelocity>
                <MinLength>20</MinLength>
            </Args>
        </Behavior>
     <Behavior>
            <Class>behaviors.XYMoveBounceDirOne</Class>
            <Args>
                <Id>move</Id>
                <XVel>2</XVel>
        		<YVel>0</YVel>
                <NoBounceTime>1000</NoBounceTime>
                <BQSDistance>100</BQSDistance>
            </Args>
        </Behavior>
        <Behavior>
            <Class>behaviors.BehaviorChain</Class>
            <Args>
                <Id>runcolordecay</Id>
                <Inputs>
                    <Id>dirped</Id>
                </Inputs>
                <ChainedBehaviors>
                    <Id>setbrightcolor</Id>
                    <Id>mover</Id>
                    <Id>decaylong</Id>
                </ChainedBehaviors>
                <RecursiveHooks>{'mover':'movebounce'}</RecursiveHooks>
                <RenderToScreen>True</RenderToScreen>
                <Mapper>gaussmap</Mapper>
            </Args>
        </Behavior>
       <Behavior>
            <Class>behaviors.FillupBar</Class>
            <Args>
                <Id>fbar</Id>
            </Args>
        </Behavior>
        <Behavior>
            <Class>behaviors.BehaviorChain</Class>
            <Args>
                <Id>fillupleft</Id>
                <Inputs>
                    <Id>rightedge</Id>
                </Inputs>
                <ChainedBehaviors>
                    <Id>setbrightcolor</Id>
                    <Id>fbar</Id>
                    <Id>mover</Id>
                    <Id>decayshort</Id>
                </ChainedBehaviors>
                <RecursiveHooks>{'mover':'growleft'}</RecursiveHooks>
                <RenderToScreen>True</RenderToScreen>
                <Mapper>sblobmap</Mapper>
            </Args>
        </Behavior>
        <Behavior>
            <Class>behaviors.BehaviorChain</Class>
            <Args>
                <Id>fillupright</Id>
                <Inputs>
                    <Id>leftedge</Id>
                </Inputs>
                <ChainedBehaviors>
                    <Id>setbrightcolor</Id>
                    <Id>fbar</Id>
                    <Id>mover</Id>
                    <Id>decayshort</Id>
                </ChainedBehaviors>
                <RecursiveHooks>{'mover':'growright'}</RecursiveHooks>
                <RenderToScreen>True</RenderToScreen>
                <Mapper>sblobmap</Mapper>
            </Args>
        </Behavior>
        <Behavior>
            <Class>behaviors.ResponseMover</Class>
            <Args>
                <Id>mover</Id>
            </Args>
        </Behavior>
    </BehaviorConfiguration>
</LightInstallation>
